<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1"/>
        <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
        <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
        <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
        <link rel="stylesheet" href="css/style.css" />
    </head>
    <body ng-app="app" ng-controller="mainController">
        <div class="container-fluid">
            <div class="row" id="head">
                <div class="col-md-12 col-sm-12 col-lg-12"><span class= "title" >{{groupName}} - {{groupMembers}}</span></div>
            </div>
            <div class="row" id="map">
                <div class="col-md-10 col-sm-12 col-lg-9">
                    <svg id="svg_map" viewBox="0 0 900 510" xmlns="http://www.w3.org/2000/svg" version="1.1" xlink="http://www.w3.org/1999/xlink">
                        <g id="first_floor_outline" stroke = "#000" stroke-width = "1" fill = "none">
                            <path stroke-width="2" id="svg_3" d="M1,216 L240,45 L480,216 L387,495 L96,495 L1,216 z"/>
                        </g>
                        <!-- Mark beacon points -->
                        <g ng-repeat="beacon in beaconList track by $index" stroke="red" stroke-width="3" fill="red">
                            <circle ng-attr-id="{{beacon.id}}" ng-attr-cx="{{beacon.coordinates.x}}" ng-attr-cy="{{beacon.coordinates.y}}" ng-attr-r="{{beacon.r}}" />
                        </g>
                        <g ng-repeat="device in deviceList track by $index">
                            <path ng-attr-id="{{device.pathId}}" ng-attr-d="{{device.path}}" class="hidden"/>
                            <a data-toggle="collapse" href="#collapse1"><image ng-attr-x="{{device.initialX}}" ng-attr-y="{{device.initialY}}" ng-attr-width="{{device.width}}" ng-attr-height="{{device.height}}" xlink:href="{{device.image}}" ng-click="showDeviceInfo(device.pathId)" >
                                <animateMotion dur="100s" repeatCount="indefinite">
                                   <mpath xlink:href="{{'#' + device.pathId}}"/>
                                </animateMotion>
                                <title><div ng-attr-title="{{showDeviceName(device.pathId)}}">{{deviceName}}</div></title>
                            </image>
                            </a>
                        </g>
                    </svg>
                </div>
                <div class="col-md-2 col-sm-12 col-lg-3">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="panel-group" ng-show="showInfo" class="ng-hide">
                                <div class="panel panel-default">
                                  <div class="panel-heading">
                                    <h4 class="panel-title">
                                      <a data-toggle="collapse" href="#collapse1">Device Info</a>
                                    </h4>
                                  </div>
                                  <div id="collapse1" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <div class="row">
                                            <div class="col-md-12">
                                                 Name: {{device.name}}
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                 ID: {{device.pathId}}
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                 Battery Life: {{device.battery}}
                                            </div>
                                        </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script src="js/mainController.js"></script>
        <script src="js/animation.js"></script>
    </body>
</html>